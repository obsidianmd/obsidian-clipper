<!DOCTYPE html>
<html lang="en" style="height: 100%; overflow: hidden;">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<title>Obsidian Web Clipper Settings</title>
	<link rel="stylesheet" href="style.css">
</head>
<body style="height: 100%; overflow: hidden;">
		<div id="settings">
			
			<div id="settings-container">
				<div id="sidebar">
					<ul>
						<li class="sidebar-heading">Settings</li>
						<li data-section="general" class="active">General</li>
						<li data-section="interpreter" display="none">Interpreter</li>
						<li data-section="properties">Properties</li>
						<li class="sidebar-heading">Templates</li>
					</ul>
					<button type="button" id="new-template-btn" class="mod-cta">New&nbsp;template</button>
					<ul id="template-list"></ul>
					
				</div>
				
				<div id="content">
					<div id="navbar">
						<div id="navbar-title">
							<svg xmlns="http://www.w3.org/2000/svg" class="logo" fill="none" viewBox="0 0 256 256">
								<path class="purple" d="M94.82 149.44c6.53-1.94 17.13-4.9 29.26-5.71a102.97 102.97 0 0 1-7.64-48.84c1.63-16.51 7.54-30.38 13.25-42.1l3.47-7.14 4.48-9.18c2.35-5 4.08-9.38 4.9-13.56.81-4.07.81-7.64-.2-11.11-1.03-3.47-3.07-7.14-7.15-11.21a17.02 17.02 0 0 0-15.8 3.77l-52.81 47.5a17.12 17.12 0 0 0-5.5 10.2l-4.5 30.18a149.26 149.26 0 0 1 38.24 57.2ZM54.45 106l-1.02 3.06-27.94 62.2a17.33 17.33 0 0 0 3.27 18.96l43.94 45.16a88.7 88.7 0 0 0 8.97-88.5A139.47 139.47 0 0 0 54.45 106Z"/><path class="purple" d="m82.9 240.79 2.34.2c8.26.2 22.33 1.02 33.64 3.06 9.28 1.73 27.73 6.83 42.82 11.21 11.52 3.47 23.45-5.8 25.08-17.73 1.23-8.67 3.57-18.46 7.75-27.53a94.81 94.81 0 0 0-25.9-40.99 56.48 56.48 0 0 0-29.56-13.35 96.55 96.55 0 0 0-40.99 4.79 98.89 98.89 0 0 1-15.29 80.34h.1Z"/><path class="purple" d="M201.87 197.76a574.87 574.87 0 0 0 19.78-31.6 8.67 8.67 0 0 0-.61-9.48 185.58 185.58 0 0 1-21.82-35.9c-5.91-14.16-6.73-36.08-6.83-46.69 0-4.07-1.22-8.05-3.77-11.21l-34.16-43.33c0 1.94-.4 3.87-.81 5.81a76.42 76.42 0 0 1-5.71 15.9l-4.7 9.8-3.36 6.72a111.95 111.95 0 0 0-12.03 38.23 93.9 93.9 0 0 0 8.67 47.92 67.9 67.9 0 0 1 39.56 16.52 99.4 99.4 0 0 1 25.8 37.31Z"/></svg>
							<span>Obsidian Web Clipper</span>
						</div>
						<button id="hamburger-menu" class="hamburger-menu">
							<span class="hamburger-icon"></span>
						</button>
					</div>
					<div id="general-section" class="settings-section active">
						<div class="settings-section-header">
							<h2>General settings</h2>
						</div>
						<form id="general-settings-form">
								<div>
									<h3>Vaults</h3>
									<div class="setting-item-description">By default, clipped notes are saved to the currently open vault. You can add vaults here if you want the option to save to different vaults. Vault names must exactly match the name of the Obsidian vault. Press <strong>enter</strong> to add a&nbsp;vault.</div>
									<input type="text" id="vault-input" placeholder="Press enter to add a vault" autocomplete="off" spellcheck="false" />
									<ul id="vault-list"></ul>
								</div>
								<div id="hotkeys-subsection">
									<h3>Hotkeys</h3>
									<div class="setting-item-description shortcut-instructions">
									</div>
									<div id="keyboard-shortcuts-list"></div>
								</div>
								<div>
									<h3>Advanced</h3>
									<div class="setting-item mod-horizontal" style="display: none;">
										<div class="setting-item-info">
											<label for="show-more-actions-toggle">Show actions button</label>
											<div class="setting-item-description">
												Allows you to inspect page variables from the clipper menu. Useful for seeing the variables that are available to use in&nbsp;templates.
											</div>
										</div>
										<div class="setting-item-control">
											<div class="checkbox-container is-enabled">
												<input type="checkbox" id="show-more-actions-toggle" />
											</div>
										</div>
									</div>
									<div class="setting-item mod-horizontal" style="display: none;">
										<div class="setting-item-info">
											<label for="beta-features-toggle">Early access features</label>
											<div class="setting-item-description">
												Use features that require the latest <a href="https://help.obsidian.md/Obsidian/Early+access+versions" target="_blank">early access version</a> of Obsidian. Currently requires Obsidian 1.7.2 or later.
											</div>
										</div>
										<div class="setting-item-control">
											<div class="checkbox-container">
												<input type="checkbox" id="beta-features-toggle" />
											</div>
										</div>
									</div>
									<div class="setting-item mod-horizontal">
										<div class="setting-item-info">
											<label for="silent-open-toggle">Save clipped note without opening&nbsp;it</label>
											<div class="setting-item-description">
												Clipped notes will be saved but will not open as a new tab. Obsidian will still be brought to the foreground.
											</div>
										</div>
										<div class="setting-item-control">
											<div class="checkbox-container">
												<input type="checkbox" id="silent-open-toggle" />
											</div>
										</div>
									</div>
									<div class="setting-item mod-horizontal">
										<div class="setting-item-info">
											<label for="legacy-mode-toggle">Legacy&nbsp;mode</label>
											<div class="setting-item-description">
												Uses the URI clipping method compatible with Obsidian 1.6.7 or earlier. Note that the length of the content you can clip is limited by your browser and OS. Some pages may fail without any errors.
											</div>
										</div>
										<div class="setting-item-control">
											<div class="checkbox-container">
												<input type="checkbox" id="legacy-mode-toggle" />
											</div>
										</div>
									</div>
									<div class="setting-item mod-horizontal">
										<div class="setting-item-info">
											<label for="reset-default-template-btn">Reset default template</label>
											<div class="setting-item-description">Remove any changes you've made to the default&nbsp;template.</div>
										</div>
										<div class="setting-item-control">
											<button type="button" id="reset-default-template-btn" class="mod-warning">Reset</button>
										</div>
									</div>
									<!-- Add this at the end of the general settings section -->
									<div class="setting-item mod-horizontal">
										<div class="setting-item-info">
											<label for="export-all-settings-btn">Export all settings</label>
											<div class="setting-item-description">Export all settings including templates and properties.</div>
										</div>
										<div class="setting-item-control">
											<button type="button" id="export-all-settings-btn">Export</button>
										</div>
									</div>
									<div class="setting-item mod-horizontal">
										<div class="setting-item-info">
											<label for="import-all-settings-btn">Import all settings</label>
											<div class="setting-item-description">Import all settings including templates and properties. This will replace your current configuration.</div>
										</div>
										<div class="setting-item-control">
											<button type="button" id="import-all-settings-btn">Import</button>
										</div>
									</div>
								</div>
						</form>
					</div>

					<div id="interpreter-section" class="settings-section">
						<div class="settings-section-header">
							<h2>Interpreter</h2>
						</div>
						<form id="interpreter-settings-form">
							<div>
								<div class="setting-item mod-horizontal">
									<div class="setting-item-info">
										<label for="interpreter-toggle">Enable interpreter</label>
										<div class="setting-item-description">
											Use natural language to extract data from pages. For example, you can use the template syntax <strong>{{prompt:"a summary of the page"}}</strong>. Requires an API&nbsp;key or local&nbsp;model.
										</div>
									</div>
									<div class="setting-item-control">
										<div class="checkbox-container">
											<input type="checkbox" id="interpreter-toggle" />
										</div>
									</div>
								</div>
								<div class="setting-item mod-horizontal">
									<div class="setting-item-info">
										<label for="interpreter-auto-run-toggle">Automatically run</label>
										<div class="setting-item-description">Run prompt variables immediately if the template contains any. This will consume API credits with your model provider. Turn off if you only want to run interpreter manually.</div>
									</div>
									<div class="setting-item-control">
										<div class="checkbox-container">
											<input type="checkbox" id="interpreter-auto-run-toggle" />
										</div>
									</div>
								</div>
								<div class="setting-item">
									<label for="default-prompt-context" style="font-weight: 400;">Default prompt context</label>
									<div class="setting-item-description">The model will use this context to interpret prompt variables. Variables can be used&nbsp;here.</div>
									<textarea id="default-prompt-context" rows="4" placeholder="{{fullHtml}}" spellcheck="false"></textarea>
								</div>
							</div>
							<div>
								<h3>Models</h3>
								<div class="model-list-container">
									<div id="model-list"></div>
									<div class="add-btn">
										<a id="add-model-btn">+ Add model</a>
									</div>
								</div>
								<div class="setting-item mod-horizontal">
									<div class="setting-item-info">
										<label for="openai-api-key">OpenAI API key</label>
										<div class="setting-item-description">You can get your OpenAI API&nbsp;key&nbsp;<a href="https://platform.openai.com/api-keys" target="_blank">here</a>.</div>
									</div>
									<div class="setting-item-control">
										<input type="password" id="openai-api-key" placeholder="OpenAI API key">
									</div>
								</div>
								<div class="setting-item mod-horizontal">
									<div class="setting-item-info">
										<label for="anthropic-api-key">Anthropic API key</label>
										<div class="setting-item-description">You can get your Anthropic API&nbsp;key&nbsp;<a href="https://console.anthropic.com/settings/keys" target="_blank">here</a>.</div>
									</div>
									<div class="setting-item-control">
										<input type="password" id="anthropic-api-key" placeholder="Anthropic API key">
									</div>
								</div>
							</div>
							
						</form>
					</div>

					<div id="properties-section" class="settings-section">
						<div class="settings-section-header">
							<h2>Properties</h2>
						</div>
						<form id="property-types-form">
							<div>
								<div class="setting-item mod-horizontal">
									<div class="setting-item-info">
										<label for="import-types-btn">Import properties</label>
										<div class="setting-item-description">To import your properties from Obsidian, locate the <strong>types.json</strong> file in the <strong>.obsidian</strong> folder within your vault. Note this folder is hidden by default on most operating systems.</div>
									</div>
									<div class="setting-item-control">
										<button type="button" id="import-types-btn">Import</button>
									</div>
								</div>
								<div class="setting-item mod-horizontal">
									<div class="setting-item-info">
										<label for="export-types-btn">Export properties</label>
										<div class="setting-item-description">Save Web Clipper properties to a <strong>types.json</strong> file that can be imported into your Obsidian vault, or into Web Clipper on other devices.</div>
									</div>
									<div class="setting-item-control">
										<button type="button" id="export-types-btn">Export</button>
									</div>
								</div>
								<div class="setting-item mod-horizontal">
									<div class="setting-item-info">
										<label for="delete-unused-properties-btn">Remove unused properties</label>
										<div class="setting-item-description">Remove all properties that are not used in any template.</div>
									</div>
									<div class="setting-item-control">
										<button type="button" id="delete-unused-properties-btn">Remove</button>
									</div>
								</div>
							</div>
							<div>
								<h3>All properties</h3>
								<div class="add-btn" style="display: none;">
									<a id="add-property-type-btn">+ Add property</a>
								</div>
								<div id="property-types-list" class="properties-list"></div>
							</div>
							
						</form>
					</div>

					<div id="templates-section" class="settings-section">
						<div class="settings-section-header">
							<h2 id="template-editor-title">Edit template</h2>
							<div class="settings-section-actions">
								<button class="export-template-btn mh">Export</button>
								<button class="import-template-btn mh">Import</button>
								<div class="menu-btn">
									<button id="more-actions-btn" class="menu-toggle">More</button>
									<div id="template-actions-menu" class="menu">
										<div class="menu-item" id="duplicate-template-btn">
											<div class="menu-item-icon">
												<i data-lucide="copy-plus"></i>
											</div>
											<div class="menu-item-title">
												Duplicate
											</div>
										</div>
										<div class="menu-item" id="copy-template-json-btn">
											<div class="menu-item-icon">
												<i data-lucide="clipboard-list"></i>
											</div>
											<div class="menu-item-title">
												Copy as JSON
											</div>
										</div>
										<div class="menu-item export-template-btn dkh">
											<div class="menu-item-icon">
												<i data-lucide="files"></i>
											</div>
											<div class="menu-item-title">
												Export
											</div>
										</div>
										<div class="menu-item import-template-btn dkh">
											<div class="menu-item-icon">
												<i data-lucide="import"></i>
											</div>
											<div class="menu-item-title">
												Import
											</div>
										</div>
										<div class="menu-item" id="delete-template-btn">
											<div class="menu-item-icon">
												<i data-lucide="trash-2"></i>
											</div>
											<div class="menu-item-title">
												Delete
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<form id="template-settings-form">
							<div id="template-editor">
								<div class="setting-item">
									<label for="template-name">Template name</label>
									<input type="text" id="template-name" placeholder="Template name" />
								</div>
								<div class="setting-item">
									<label for="template-behavior">Behavior</label>
									<select id="template-behavior">
										<option value="create">Create new note</option>
										<option value="append-specific">Add to an existing note, at the bottom</option>
										<option value="prepend-specific">Add to an existing note, at the top</option>
										<option value="append-daily">Add to daily note, at the bottom</option>
										<option value="prepend-daily">Add to daily note, at the top</option>
									</select>
								</div>
								<div id="behavior-warning-container" class="warning-container" style="display: none;">
									<div class="warning-icon">
										<i data-lucide="alert-triangle"></i>
									</div>
									<div class="warning-text">
										Adding to an existing note or daily note requires Obsidian 1.7.2 or later.
									</div>
								</div>
								<div class="setting-item" id="note-name-format-container" style="display: none;">
									<label for="note-name-format">Note name</label>
									<div class="setting-item-description">Format for the file name of the note. You can use variables like {{title}}, {{date}}, and {{published}} to pre-populate data from the&nbsp;page. <a href="https://github.com/obsidianmd/obsidian-clipper?tab=readme-ov-file#template-variables" target="_blank">Learn&nbsp;more</a>.</div>
									<input type="text" id="note-name-format" placeholder="{{title}}" />
								</div>
								<div class="setting-item" id="path-name-container" style="display: none;">
									<label for="template-path-name">Note location</label>
									<div class="setting-item-description">The folder or path of the note.</div>
									<input type="text" id="template-path-name" placeholder="Clippings" />
								</div>
								<div class="setting-item">
									<label for="template-vault">Vault</label>
									<div class="setting-item-description">Select the default vault for this template. Go to <a href="?section=general">general settings</a> to add or remove&nbsp;vaults.</div>
									<select id="template-vault">
										<option value="">Last used</option>
									</select>
								</div>
								<div class="setting-item">
									<label for="url-patterns">Template triggers</label>
									<div class="setting-item-description">Define rules to automatically select this template if it matches a URL pattern or contains schema.org data. One rule per&nbsp;line.</div>
									<textarea id="url-patterns" placeholder="https://example.com/" rows="2" spellcheck="false"></textarea>
								</div>
								<div id="properties-container">
									<label>Properties</label>
									<div class="setting-item-description">Properties to add to the top of the clipped note. Use variables to pre-populate data from the&nbsp;page.</div>
									<div id="template-properties" class="properties-list"></div>
									<div class="add-btn metadata-add-btn"><a id="add-property-btn">+ Add property</a></div>
								</div>
								<div class="setting-item">
									<label for="note-content-format">Note content</label>
									<div class="setting-item-description">Customize the content of the note. Use variables to pre-populate data from the&nbsp;page.</div>
									<textarea id="note-content-format" rows="6" placeholder="{{content}}"></textarea>
								</div>
								<div class="setting-item" id="prompt-context-container">
									<label for="prompt-context">Interpreter context</label>
									<div class="setting-item-description">The context used to interpret prompt variables. Overrides the default context defined in <a href="?section=interpreter">Interpreter settings</a>. Variables can be used&nbsp;here.</div>
									<textarea id="prompt-context" rows="4" spellcheck="false"></textarea>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>

		<div id="import-modal" class="modal-container">
			<div class="modal-bg"></div>
			<div class="modal">
				<div class="modal-header">
					<div class="modal-title">Import</div>
				</div>
				<div class="modal-content">
					<div class="import-options">
						<div class="import-drop-zone import-option">
							<p>Drag and drop file here</p>
						</div>
						<p>Or paste content below</p>
						<textarea class="import-json-textarea" placeholder="Paste JSON here"></textarea>
					</div>
				</div>
				<div class="modal-button-container">
					<button class="import-confirm-btn mod-cta">Import</button>
					<button class="import-cancel-btn">Cancel</button>
				</div>
			</div>
		</div>

		<script type="module" src="settings.js"></script>
</body>
</html>